---
title: "childbed fever and hand washing"
author: "Ayanfe A."
date: "2022-12-25"
output: html_document
---

# Dr Ignaz Semmelweis: The 'Savior of Mothers'
 Dr. Ignaz Semmelweis was a Hungarian physician born in 1818 and active at the Vienna General Hospital. If Dr. Semmelweis looks troubled it's probably because he's thinking about childbed fever: A deadly disease affecting women that just have given birth. He is thinking about it because in the early 1840s at the Vienna General Hospital as many as 10% of the women giving birth die from it. He is thinking about it because he knows the cause of childbed fever: It's the contaminated hands of the doctors delivering the babies. And they won't listen to him and wash their hands!

In this notebook, we're going to reanalyze the data that made Semmelweis discover the importance of handwashing. Let's start by looking at the data that made Semmelweis realize that something was wrong with the procedures at Vienna General Hospital.

```{r}
# Load the libraries
library(tidyverse)
library(dplyr)

# Read the dataset
yearly <- read_csv('data/yearly_deaths_by_clinic.csv')
head(yearly)
```

## The alarming number of deaths
The above table shows the number of women giving birth at the two clinics at the vienna General Hospital from 1841 t0 1846.
Alarming number of women died as a result of childbirth, most of them from childbed fever.

## Proportion of deaths out of the number of women giving birth

```{r}
yearly <- mutate(yearly, proportion_deaths = deaths/births)
print(yearly)

```

## Death at the clinics
```{r}
# Setting the size of plots 
options(repr.plot.width=7, repr.plot.height=4)

# Plot yearly proportion of deaths at the two clinics
ggplot(yearly, aes(year, proportion_deaths, color=clinic))+
  geom_line()

```

## Something unusual in clinic 2
The proportion of deaths in clinic 1 is always higher than clinic 2. The only difference in the clinics was that many medical students served in clinic 1 whereas most midwife nurses served at clinic 2. While the midwives only tended to the women giving birth, the medical students also spent time in the autopsy rooms examining corpses.

Semmelweis suspected that something on the corpses spread from the hands of the medical students, caused childbed fever. So in a desperate attempt to stop mortality rates, he decried: ~Wash your hands~ This was quite unorthodox and controversial as nobody knew about bacteria in Vienna that time


## Did handwashing had any effect?
```{r}
# Read monthly deaths
monthly <- read_csv('data/monthly_deaths.csv')

# Adding a new column with proportion of deaths per number births
monthly <- monthly %>% 
  mutate(proportion_deaths = deaths/ births)

head(monthly)

```
## The Effect of Handwashing
Let's vitualise the mortality trend over the years if we can spot the region where there was a marked reduction in proportion of deaths.

```{r}
# Plot monthly proportion of deaths
ggplot(monthly, aes(date, proportion_deaths))+
  geom_line()+
  labs(x='date', y='proportion_deaths')
```

## The Effect of handwashing highlighted
Starting from the summer of 1847, the proportion of deaths drastically reduced, you're right! That was Semmelweis made handwashing obligatory, you must wash those hands either by hook or by crook. 
To have a further insight, we can highlight the years starting from 1847 and see the trend

```{r}
handwashing_start = as.Date('1847-06-01')

# Add a TRUE/FALSE column to monthly, named handwashinged_started
monthly <- monthly %>% 
  mutate(handwashing_started = date 
         >= handwashing_start)

# Plot montly proportion of deaths before and after handwashing
ggplot(monthly, aes(date, proportion_deaths, color=handwashing_started))+
  geom_line()+
  labs(x='date', y='proportion_deaths')

```

## Yes! Handwashing led to fewer mortality, but by what extent?
```{r}
monthly_summary <- monthly %>% 
  group_by(handwashing_started) %>% 
  summarise(mean_proportion_deaths = mean(proportion_deaths))

# Print out summary
print(monthly_summary)

```

## Is the reduction statistically significant, let's find out
Although, from the table above, the reduction is around 8 percentag points, from 10 % to 2% when handwashing was enforce. To ascertain our claim, t-test will be appropriate

```{r}
# Calculate  95% confidence interval using t.test
test_result <- t.test(proportion_deaths ~ handwashing_started, monthly)
test_result

```
## Is handwashing really effective
Unequivocally, from the analysis carried out, we are 95% confident that not washing of hands increased the proportion of deaths between the range if 6.7 and 10. Hence, it is a safe practice for health care givers to wash hands so as to reduce spread of germs.
